---
import Layout from "../../layouts/Layout.astro";

const locationInfo = [
  {
    title: "Trụ sở chính",
    lines: [
      {
        text: "Tầng 5, tòa nhà Diamond Flower Tower,",
        icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008z" />`
      },
      {
        text: "Phố Hoàng Đạo Thúy, Phường Nhân Chính,",
      },
      {
        text: "Quận Thanh Xuân, Thành phố Hà Nội, Việt Nam",
      }
    ]
  },
  {
    title: "Văn phòng kho",
    lines: [
      {
        text: "Kho Hà Nội:\nVân Canh, Hoài Đức, Hà Nội",
        icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />`
      },
      {
        text: "Kho Bắc Giang:\nĐường Hoàng Hoa Thám, Tân Yên, Bắc Giang",
        icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />`
      },
      {
        text: "Kho Thanh Hoá:\nĐường Kim Xuân, Hoằng Hoá, Thanh Hoá",
        icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />`
      }
    ]
  },
  {
    title: "Liên hệ",
    lines: [
      {
        text: "096 492 0242",
        href: "tel:+84964920242",
        icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />`
      },
      {
        text: "sale@slmsolar.com",
        href: "mailto:sale@slmsolar.com",
        icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />`
      },
     
    ]
  }
];

const contactCards = [
  {
    title: "KHÁCH HÀNG",
    description: "Cảm ơn quý khách hàng đã ghé thăm, vui lòng liên hệ với NVCSKH để nhận được tư vấn tốt nhất về các giải pháp điện mặt trời SolarMax.",
    icon: `<path d="M12 4.354a4 4 0 110 5.292V4.354zM15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197L15 21zM13 7a4 4 0 11-8 0 4 4 0 018 0z"/>`,
    links: [
      { text: "Điện mặt trời áp mái", href: "tel:+84964920242" },
      { text: "Điện mặt trời công nghiệp", href: "tel:+84969663387" },
      { text: "Bảo trì hệ thống điện mặt trời", href: "tel:+84964920242" },
    ],
    showHotline: true
  },
  {
    title: "ĐẠI LÝ",
    description: "Trở thành đại lý của SolarMax để cùng nhau phát triển và mang giải pháp năng lượng sạch đến với nhiều khách hàng hơn.",
    icon: `<path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>`,
    button: { text: "Xem chi tiết", href: "#" }
  },
  {
    title: "ỨNG VIÊN",
    description: "Tham gia đội ngũ SolarMax để góp phần vào sứ mệnh phát triển năng lượng tái tạo và bảo vệ môi trường!",
    icon: `<path d="M20 7h-4V4c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v3H4c-1.103 0-2 .897-2 2v11c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V9c0-1.103-.897-2-2-2zM4 20V9h16l.001 11H4zm6-9h4v2h-4v-2zm0 4h4v2h-4v-2z"/>`,
    button: { text: "Gửi hồ sơ ứng tuyển", href: "mailto:sale@slmsolar.com" }
  }
];

---

<Layout title="Liên hệ">
  <div class="bg-white">
    <header class="header-section">
      <div class="relative isolate overflow-hidden pt-14">
          <img 
            src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=2071&auto=format&fit=crop" 
            alt="SLM Solar Contact Banner - Professional Team" 
            class="absolute inset-0 -z-10 size-full object-cover brightness-75"
          >
          <div class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden sm:-top-80" aria-hidden="true">
            <div class="relative left-[calc(50%-11rem)] aspect-1155/678 w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-linear-to-tr from-[#ff80b5] to-[#9089fc] opacity-20 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
          </div>
          <div class="mx-auto container px-6 lg:px-8">
            <div class="mx-auto py-32 sm:py-48 lg:py-32">
              <div class="sm:mb-8 flex flex-col items-center justify-center text-center">
                <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                  <div class="text-white text-center max-w-3xl mx-auto">
                    <h1 class="text-4xl font-bold tracking-tight text-balance text-white sm:text-5xl mb-6 mt-20">Liên Hệ Với SolarMax</h1>
                    <p class="text-xl text-white mb-8">Hãy để chúng tôi đồng hành cùng bạn trong hành trình chuyển đổi sang năng lượng sạch</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]" aria-hidden="true">
            <div class="relative left-[calc(50%+3rem)] aspect-1155/678 w-[36.125rem] -translate-x-1/2 bg-linear-to-tr from-[#ff80b5] to-[#9089fc] opacity-20 sm:left-[calc(50%+36rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
          </div>
    </header>
  <div class="mx-auto grid container grid-cols-1 lg:grid-cols-3 gap-6 p-6 bg-white">
    {contactCards.map(card => (
      <div class="bg-gradient-to-r from-green-500 to-teal-500 p-6 rounded-lg relative">
        <div class="flex items-center gap-4 mb-4">
          <svg class="w-10 h-10 text-white" viewBox="0 0 24 24" fill="currentColor" set:html={card.icon} />
          <h3 class="text-xl font-bold text-white">{card.title}</h3>
        </div>
        <p class="text-sm text-white mb-6">{card.description}</p>
        
        {card.links && (
          <div class="space-y-2">
            <h4 class="text-sm font-semibold text-white">Liên hệ ngay</h4>
            {card.links.map(link => (
              <a href={link.href} class="block bg-white/10 p-2.5 text-sm text-white hover:bg-white/20 rounded">
                {link.text} <span class="float-right">></span>
              </a>
            ))}
          </div>
        )}

        {card.showHotline && (
          <p class="text-sm text-white mt-4">
            Nếu có nhu cầu khác vui lòng liên hệ hotline: <br/>
            <span class="text-base font-semibold">+84 (96) 492-0242</span>
          </p>
        )}

        {card.button && (
          <a href={card.button.href} class="absolute left-1/2 -translate-x-1/2 bottom-4 w-[calc(100%-2rem)] border-2 border-white text-sm text-white text-center p-2.5 rounded hover:bg-white/10">
            {card.button.text}
          </a>
        )}
      </div>
    ))}
  </div>

  <!-- Contact Information and Map Section -->
  <div class="bg-white py-12">
    <div class="mx-auto container px-6">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Contact Information - Takes 1/3 width -->
        <div class="space-y-8">
          {locationInfo.map(section => (
            <div>
              <h2 class="text-xl font-bold text-[#2B3440] mb-3">{section.title}</h2>
              <div class="space-y-2">
                {section.lines.map(line => (
                  <div class="flex items-start gap-2">
                    <svg class="w-5 h-5 text-gray-600 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" set:html={line.icon} />
                    <p class="text-base text-gray-600 leading-relaxed whitespace-pre-line">{line.text}</p>
                  </div>
                ))}
              </div>
            </div>
          ))}
        </div>

        <!-- Google Map - Takes 2/3 width -->
        <div class="lg:col-span-2 h-[500px]">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3723.8897364911726!2d105.80170537607658!3d21.005702080634823!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135add79f13b293%3A0x3ae54540208b57ca!2zQ8O0bmcgdHkgQ-G7lSBwaOG6p24gxJHhuqd1IHRyIFNMTQ!5e0!3m2!1svi!2s!4v1710836072051!5m2!1svi!2s"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            class="rounded-lg"
          ></iframe>
        </div>
      </div>
    </div>
  </div>

  <!-- Thêm Modal Form sau phần contact cards -->
  <div id="career-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-md w-full p-6 relative">
        <button 
          type="button"
          id="close-modal-btn"
          class="absolute top-4 right-4 text-gray-400 hover:text-gray-500"
        >
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>

        <h3 class="text-xl font-bold text-gray-900 mb-4">Gửi Hồ Sơ Ứng Tuyển</h3>
        
        <form id="career-form" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700">Họ và tên</label>
            <input type="text" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Số điện thoại</label>
            <input type="tel" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Vị trí ứng tuyển</label>
            <input type="text" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">File CV (PDF)</label>
            <input type="file" accept=".pdf" required class="mt-1 block w-full text-sm text-gray-500
              file:mr-4 file:py-2 file:px-4
              file:rounded-md file:border-0
              file:text-sm file:font-semibold
              file:bg-green-50 file:text-green-700
              hover:file:bg-green-100
            ">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Giới thiệu bản thân</label>
            <textarea rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
          </div>

          <button
            type="submit"
            class="w-full bg-green-600 text-white rounded-md py-2 px-4 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
          >
            Gửi hồ sơ
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Thêm modal cho banner đại lý -->
  <div id="dealer-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="relative max-w-[90vw] w-[1200px]">
        <button 
          type="button"
          id="close-dealer-modal-btn"
          class="absolute -top-12 right-0 text-white hover:text-gray-200 bg-black/50 hover:bg-black/70 rounded-full p-2 backdrop-blur-sm transition-all duration-200"
        >
          <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
        <img 
          src="images/banner-dang-ky-dai-ly.jpg" 
          alt="Banner đăng ký đại lý"
          class="w-full h-auto rounded-lg shadow-2xl"
        >
      </div>
    </div>
  </div>

</div>
 
</Layout>

<script>
  // Thêm các hàm JavaScript để xử lý modal
  function openModal() {
    const modal = document.getElementById('career-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  }

  function closeModal() {
    const modal = document.getElementById('career-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
  }

  function openDealerModal() {
    const modal = document.getElementById('dealer-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  }

  function closeDealerModal() {
    const modal = document.getElementById('dealer-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    // Thêm event listener cho nút close
    document.getElementById('close-modal-btn')?.addEventListener('click', closeModal);
    
    // Thêm event listener để đóng modal khi click outside
    document.getElementById('career-modal')?.addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        closeModal();
      }
    });

    // Thêm event listener cho phím Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
        closeDealerModal();
      }
    });

    // Xử lý nút career
    const careerButtons = document.querySelectorAll('a[href="mailto:sale@slmsolar.com"]');
    careerButtons.forEach(button => {
      const text = button.textContent?.trim() || '';
      if (text.includes('Gửi hồ sơ ứng tuyển')) {
        (button as HTMLAnchorElement).href = '#';
        button.addEventListener('click', (e) => {
          e.preventDefault();
          openModal();
        });
      }
    });

    // Xử lý form submit
    document.getElementById('career-form')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      alert('Cảm ơn bạn đã gửi hồ sơ. Chúng tôi sẽ liên hệ lại sớm nhất!');
      closeModal();
    });

    // Xử lý click cho nút xem chi tiết đại lý
    const dealerButtons = document.querySelectorAll('a[href="#"]');
    dealerButtons.forEach(button => {
      const text = button.textContent?.trim() || '';
      if (text.includes('Xem chi tiết')) {
        button.addEventListener('click', (e) => {
          e.preventDefault();
          openDealerModal();
        });
      }
    });

    // Thêm event listener cho nút close dealer modal
    document.getElementById('close-dealer-modal-btn')?.addEventListener('click', closeDealerModal);
    
    // Đóng dealer modal khi click outside
    document.getElementById('dealer-modal')?.addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        closeDealerModal();
      }
    });
  });
</script>

<style>
  /* Thêm styles cho cả hai modal */
  #career-modal,
  #dealer-modal {
    transition: all 0.3s ease-in-out;
  }

  /* Thêm animation cho modal dealer */
  #dealer-modal img {
    transition: transform 0.3s ease-in-out;
  }

  #dealer-modal.hidden img {
    transform: scale(0.95);
  }

  #dealer-modal:not(.hidden) img {
    transform: scale(1);
  }
</style>
